---
layout: post
title: vue-router
tags:
- vue
categories: vue
description: vue-router使用总结
---

<!-- more -->
### vue-router命名
```
const router = new Router({
  routes: [
    {
      name: 'shouye',
      path: '/shouye',
      redirect: '/index',
      component: Shouye,
      meta: { requireAuth: true },
      children: [   //  子路由
        {
          name: 'shop',
          path: '/shop',
          meta: { requireAuth: false },
          component: Shop
        },
        {
          name: 'display',
          path: '/display',
          meta: { requireAuth: false },
          component: DisPlay
        },
        {
          name: 'attendence',
          path: '/attendence',
          meta: { requireAuth: false },
          component: Attendence
        },
        {
          name: 'address',
          path: '/address',
          meta: { requireAuth: false },
          component: Address
        },
        {
          name: 'work',
          path: '/work',
          meta: { requireAuth: false },
          component: Work
        },
        {
          name: 'index',
          path: '/index',
          meta: { requireAuth: false },
          component: Index
        },
        {
          name: 'train',
          path: '/train',
          meta: { requireAuth: false },
          component: Train,
          children: [
            {
              name: 'course',
              path: '/course',
              meta: { requireAuth: false },
              component: Course
            }
          ]
        }
      ]
    },
    {
      name: 'login',
      path: '/login',
      meta: { requireAuth: false },
      component: Login
    },
    {
      path: '/',
      redirect: '/login'
    }  // 这样进/ 就会跳转到/index
  ],
  linkActiveClass: 'active'
});
```
- 设置requireAuth: true 用于判断是否可以直接访问，不需要登录
- redirect 为重定向
- children设置子路由
### 全局钩子函数
```
// 全局导航钩子
router.beforeEach((to, from, next) => {
  // 判断该路由是否需要登录权限
  if (to.meta.requireAuth) {
    // 通过vuex state获取当前的token是否存在
    if (sessionStorage.getItem('login') === '100') {
      next();
    } else {
      next({
        path: '/login',
        query: {redirect: to.fullPath}  // 将跳转的路由path作为参数，登录成功后跳转到该路由
      });
    }
  } else {
    next();
  }
});
```
在路由跳转之前，都会执行全局导航钩子函数，上面代码用于判断该路由是否需要登录权限。
### 路由传参
1. 路径：http://localhost:8081/#/test?name=1
```
<router-link :to="{path:'/test',query: {name: id}}">跳转</router-link>(id是参数)
使用：this.$route.query.id
```
2. 路径：http://localhost:8081/#/test/1
```
<router-link :to="'/test/'+id">跳转</router-link>(id是参数)
```
路由
```
{
    path: '/test/:id',
    name: 'test',
    component: require('./components/test.vue')
}
```
使用：this.$route.params.id（这个id给上图路由的配置有关）


